<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ByteBite | Perfil</title>
    <link rel="shortcut icon" href="assets/icons/favicon.png" type="image/jpg" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/styleNavbar.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <script src="js/perfilEmpresa.js"></script>
</head>

<body>
    <!-- Navbar -->
    <div class="side_bar">
        <div class="logo_content">
            <div class="logo_nav">
                <i class='bx bx1-c-plus-plus'></i>
                <div class="logo_name">
                    <img src="assets/logo/Logo_Branca.png" alt="" style="width: 120px; margin-top: 30%;">
                </div>
            </div>

            <i class='bx bx-menu' id="btn"></i>
        </div>
        <ul class="nav_list">
            <li>
                <a href="dashboard/dashboard.html">
                    <i class='bx bx-line-chart'></i>
                    <span class="links_name">Dashboards</span>
                </a>
                <span class="tooltip">Dashboards</span>
            </li>
            <li>
                <a href="cadastroFun.html">
                    <i class='bx bx-user-plus'></i>
                    <span class="links_name">Usuários</span>
                </a>
                <span class="tooltip">Usuários</span>
            </li>
            <li>
                <a href="cadMaquinas.html">
                    <i class='bx bx-border-all'></i>
                    <span class="links_name">Máquinas</span>
                </a>
                <span class="tooltip">Máquinas</span>
            </li>
            <li>
                <a href="telaPerfil.html">
                    <i class='bx bx-user-circle'></i>
                    <span class="links_name">Perfil</span>
                </a>
                <span class="tooltip">Perfil</span>
            </li>
            <li>
                <a href="index.html">
                    <i class='bx bx-log-out'></i>
                    <span class="links_name">Sair</span>
                </a>
                <span class="tooltip">Sair</span>
            </li>
        </ul>
    </div>
    <div class="TelaPerfil">
        <header class="header">
            <h1 class="header-title">Bem-vindo ao seu perfil</h1>
        </header class="header">
        <main class="main">
            <label style="color: white;">Consulte a baixo seus painéis que estão cadastrados em nosso sistema.
                Você tem total acesso a editar e excluir seu usuários cadastrados.
            </label>
            <div class="botoes-editar-excluir">
                <label id="editar-botao">
                    <button type="button" class="buttonCadPer orange" id="EditarEmpresa">Editar conta da
                        empresa</button>
                </label>
                <label id="excluir-botao">
                    <button type="button" class="buttonCadPer blue" id="ExcluirEmpresa">Excluir conta da
                        empresa</button>
                </label>
            </div>
            <div class="title-grid-user">
                <label>Meus usuários cadastrados</label>
            </div>
            <div class="areaUsuarios">
                <div class="tableColumn id">
                    <span>ID</span>
                </div>
                <div class="tableColumn name">
                    <span>Nome</span>
                </div>
                <div class="tableColumn celPhone">
                    <span>Celular</span>
                </div>
                <div class="tableColumn email">
                    <span>E-mail</span>
                </div>
                <div class="tableColumn acao">
                    <span>Ação</span>
                </div>
            </div>
            <div id="usuariosBody">

            </div>
            <div class="modal" id="modalExcluirEmpresa">
                <div class="modal-content">
                    <header class="modal-header">
                        <h2>Excluir conta da empresa</h2>
                        <span class="modal-close" id="modalClose">✖</span>
                    </header>
                    <form class="modal-form">
                        <label for=""><b>ATENÇÃO</b><br>Ao excluir a conta empresarial você não terá mais acesso aos
                            conteúdos disponibilizados
                            pela ByteBite, e eles não poderão ser recuperados. Para mais informações consulte nosso
                            site.
                        </label>
                    </form>
                    <footer class="modal-footer">
                        <button class="buttonCadPer green" id="sucessoExcluirEmpresa">Excluir</button>
                        <button class="buttonCadPer blue" id="cancelarClienteExcluirEmpresa">Cancelar</button>
                    </footer>
                </div>
            </div>

            <div class="modal" id="modalEditarEmpresa">
                <div class="modal-content">
                    <header class="modal-header">
                        <h2>Editar dados da empresa</h2>
                        <span class="modal-close" id="modalClose4">✖</span>
                    </header>
                    <form class="modal-form">
                        <!-- Inserir dos dados da empresa puxando do banco no placeholder  -->
                        <div><input class="input" id="razaoSocial" type="text" placeholder="Razão Social"></div>
                        <div><input class="input" id="emailEmpresa" type="email" placeholder="exemplo@gmail"></div>
                        <div><input class="input" id="cnpjEmpresa" type="text" placeholder="23.920.541/0001-33"></div>
                        <div><input class="input" id="senhaEmpresa" type="password" placeholder="Nova senha"></div>
                        <div><input class="input" id="novaSenhaEmpresa" type="password"
                                placeholder="Confirme a nova senha"></div>
                    </form>
                    <footer class="modal-footer">
                        <button class="buttonCadPer green" id="sucessoEditarEmpresa">Salvar</button>
                        <button class="buttonCadPer blue" id="cancelarClienteEditarEmpresa">Cancelar</button>
                    </footer>
                </div>
            </div>

            <div class="modal" id="modalEditar">
                <div class="modal-content">
                    <header class="modal-header">
                        <h2>Editar usuário</h2>
                        <span class="modal-close" id="modalClose1">✖</span>
                    </header>
                    <form class="modal-form">

                        <div><input class="input" id="username" type="text" placeholder="Nome do usuário"></div>
                        <div><input class="input" id="emailUser" type="email" placeholder="exemplo@gmail"></div>
                        <div><input class="input" id="telefone" type="" placeholder="(11)0000-0000"></div>
                        <div><input class="input" id="newSenha" type="password" placeholder="Nova senha"></div>
                        <div><input class="input" id="confirmSenha" type="password" placeholder="Confirme a nova senha">
                        </div>

                    </form>
                    <label style="margin-left: 20px;">Ao editar os dados de um usuário, você não perderá os
                        respectivos dados!!!</label>

                    <footer class="modal-footer">

                        <button class="buttonCadPer green" id="sucessoEditar">Salvar</button>
                        <button class="buttonCadPer blue" id="cancelarClienteEditar">Cancelar</button>
                    </footer>
                </div>
            </div>

            <div class="modal" id="modalExcluirMaquina">
                <div class="modal-content">
                    <header class="modal-header">
                        <h2>Excluir usuário</h2>
                        <span class="modal-close" id="modalClose2">✖</span>
                    </header>
                    <form class="modal-form">
                        <label for="">Deseja mesmo excluir o usuário?</label>
                    </form>
                    <footer class="modal-footer">
                        <button class="buttonCadPer green" id="sucessoExcluirMaquina">Excluir</button>
                        <button class="buttonCadPer blue" id="cancelarClienteExcluirMaquina">Cancelar</button>
                    </footer>
                </div>
            </div>
            <div class="modal" id="modalConcluir">
                <div class="modal-content">
                    <header class="modal-header">
                        <h2>Sucesso</h2>
                        <span class="modal-close" id="modalClose3">✖</span>
                    </header>
                    <form class="modal-form">
                        <label for="">Execussão realizada com sucesso!!!</label>
                    </form>
                    <footer class="modal-footer">
                        <button class="buttonCadPer blue" id="ok">OK</button>
                    </footer>
                </div>
            </div>

        </main>
    </div>
</body>

</html>
<script>
    // nav bar
    let btn = document.querySelector("#btn");
    let side_bar = document.querySelector(".side_bar");

    btn.onclick = function () {
        side_bar.classList.toggle("active");
    }
</script>
<script>
    // modais

    //EMPRESA
    function openModal() {
        document.getElementById('modalExcluirEmpresa').classList.add('active');
        document.getElementById('sucessoExcluirEmpresa').addEventListener('click', () => excluirEmpresa())
    }
    const closeModal = () => document.getElementById('modalExcluirEmpresa').classList.remove('active');

    async function openModal4() {
        document.getElementById('modalEditarEmpresa').classList.add('active');
        var dadosEmpresa = await listarDadosEmpresa();

        razaoSocial.value = `${dadosEmpresa[0].razaoSocial}`
        emailEmpresa.value = `${dadosEmpresa[0].email}`
        cnpjEmpresa.value = `${dadosEmpresa[0].cnpj}`

        document.getElementById('sucessoEditarEmpresa').addEventListener('click', () => atualizarDadosEmpresa(razaoSocial.value, emailEmpresa.value, cnpjEmpresa.value, senhaEmpresa.value, novaSenhaEmpresa.value));
    }
    const closeModal4 = () => document.getElementById('modalEditarEmpresa').classList.remove('active');

    //USUARIOS
    function openModal1(id, nome, telefoneUser, email) {
        username.value = `${nome}`
        emailUser.value = `${email}`
        telefone.value = `${telefoneUser}`
        document.getElementById('modalEditar').classList.add('active');
        document.getElementById('sucessoEditar').addEventListener('click', () => editarUsuario(id, username.value, emailUser.value, telefone.value, newSenha.value, confirmSenha.value))
    }
    const closeModal1 = () => document.getElementById('modalEditar').classList.remove('active');

    function openModal2(id) {
        document.getElementById('modalExcluirMaquina').classList.add('active');
        document.getElementById('sucessoExcluirMaquina').addEventListener('click', () => excluirUser(id));
    }
    const closeModal2 = () => document.getElementById('modalExcluirMaquina').classList.remove('active');

    const sucesso = () => document.getElementById('modalConcluir').classList.add('active')
    function closeModal3() {
        document.getElementById('modalConcluir').classList.remove('active')
        window.location = 'telaPerfil.html';
    }

    // funcoes dos modais
    //EMPRESA
    document.getElementById('ExcluirEmpresa').addEventListener('click', () => openModal())
    document.getElementById('modalClose').addEventListener('click', closeModal)
    document.getElementById('cancelarClienteExcluirEmpresa').addEventListener('click', closeModal)
    document.getElementById('sucessoExcluirEmpresa').addEventListener('click', closeModal)
    document.getElementById('modalClose3').addEventListener('click', () => closeModal3())

    document.getElementById('EditarEmpresa').addEventListener('click', () => openModal4())
    document.getElementById('modalClose4').addEventListener('click', closeModal4)
    document.getElementById('cancelarClienteEditarEmpresa').addEventListener('click', closeModal4)
    document.getElementById('sucessoEditarEmpresa').addEventListener('click', closeModal4)
    document.getElementById('sucessoEditarEmpresa').addEventListener('click', sucesso)
    document.getElementById('modalClose3').addEventListener('click', () => closeModal3())
    document.getElementById('ok').addEventListener('click', () => closeModal3())

    //USUARIOS
    // document.getElementById('editarCliente').addEventListener('click', openModal1)
    document.getElementById('modalClose1').addEventListener('click', closeModal1)
    document.getElementById('cancelarClienteEditar').addEventListener('click', closeModal1)
    document.getElementById('sucessoEditar').addEventListener('click', closeModal1)
    document.getElementById('sucessoEditar').addEventListener('click', sucesso)
    document.getElementById('modalClose3').addEventListener('click', () => closeModal3())
    document.getElementById('ok').addEventListener('click', () => closeModal3())

    // document.getElementById('excluirCliente').addEventListener('click', openModal2);
    document.getElementById('modalClose2').addEventListener('click', closeModal2)
    document.getElementById('cancelarClienteExcluirMaquina').addEventListener('click', closeModal2)
    document.getElementById('sucessoExcluirMaquina').addEventListener('click', closeModal2)
    document.getElementById('sucessoExcluirMaquina').addEventListener('click', sucesso)
    document.getElementById('modalClose3').addEventListener('click', () => closeModal3())
    document.getElementById('ok').addEventListener('click', () => closeModal3())
</script>